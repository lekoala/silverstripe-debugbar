if(void 0===PhpDebugBar){var PhpDebugBar={};PhpDebugBar.$=jQuery}!function(e){PhpDebugBar.Widgets={};var t=PhpDebugBar.Widgets.htmlize=function(e){return e.replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;")},a=PhpDebugBar.Widgets.renderValue=function(e,a){return"string"!=typeof e?a?t(JSON.stringify(e,void 0,2)):JSON.stringify(e):e},s=PhpDebugBar.Widgets.highlight=function(e,a){return"string"==typeof e?"undefined"==typeof hljs?t(e):a?hljs.highlight(a,e).value:hljs.highlightAuto(e).value:("object"==typeof hljs&&e.each(function(e,t){hljs.highlightBlock(t)}),e)},i=PhpDebugBar.Widgets.createCodeBlock=function(t,a){var i=e("<pre />");return e("<code />").text(t).appendTo(i),a&&i.addClass("language-"+a),s(i),i},r=PhpDebugBar.utils.makecsscls("phpdebugbar-widgets-"),n=PhpDebugBar.Widgets.ListWidget=PhpDebugBar.Widget.extend({tagName:"ul",className:r("list"),initialize:function(e){e.itemRenderer||(e.itemRenderer=this.itemRenderer),this.set(e)},render:function(){this.bindAttr(["itemRenderer","data"],function(){if(this.$el.empty(),this.has("data"))for(var t=this.get("data"),a=0;a<t.length;a++){var s=e("<li />").addClass(r("list-item")).appendTo(this.$el);this.get("itemRenderer")(s,t[a])}})},itemRenderer:function(e,t){e.html(a(t))}}),l=PhpDebugBar.Widgets.KVListWidget=n.extend({tagName:"dl",className:r("kvlist"),render:function(){this.bindAttr(["itemRenderer","data"],function(){if(this.$el.empty(),this.has("data")){var t=this;e.each(this.get("data"),function(a,s){var i=e("<dt />").addClass(r("key")).appendTo(t.$el),n=e("<dd />").addClass(r("value")).appendTo(t.$el);t.get("itemRenderer")(i,n,a,s)})}})},itemRenderer:function(e,a,s,i){e.text(s),a.html(t(i))}});PhpDebugBar.Widgets.VariableListWidget=l.extend({className:r("kvlist varlist"),itemRenderer:function(t,a,s,n){e("<span />").attr("title",s).text(s).appendTo(t);var l=n;l&&l.length>100&&(l=l.substr(0,100)+"...");var d=null;a.text(l).click(function(){a.hasClass(r("pretty"))?a.text(l).removeClass(r("pretty")):(d=d||i(n),a.addClass(r("pretty")).empty().append(d))})}}),PhpDebugBar.Widgets.IFrameWidget=PhpDebugBar.Widget.extend({tagName:"iframe",className:r("iframe"),render:function(){this.$el.attr({seamless:"seamless",border:"0",width:"100%",height:"100%"}),this.bindAttr("data",function(e){this.$el.attr("src",e)})}}),PhpDebugBar.Widgets.MessagesWidget=PhpDebugBar.Widget.extend({className:r("messages"),render:function(){var t=this;this.$list=new n({itemRenderer:function(t,a){var s=a.message;s.length>100&&(s=s.substr(0,100)+"...");var n=e("<span />").addClass(r("value")).text(s).appendTo(t);if(!a.is_string||a.message.length>100){var l=a.message;a.is_string||(l=null),t.css("cursor","pointer").click(function(){n.hasClass(r("pretty"))?n.text(s).removeClass(r("pretty")):(l=l||i(a.message,"php"),n.addClass(r("pretty")).empty().append(l))})}a.label&&(n.addClass(r(a.label)),e("<span />").addClass(r("label")).text(a.label).appendTo(t)),a.collector&&e("<span />").addClass(r("collector")).text(a.collector).appendTo(t)}}),this.$list.$el.appendTo(this.$el),this.$toolbar=e('<div><i class="phpdebugbar-fa phpdebugbar-fa-search"></i></div>').addClass(r("toolbar")).appendTo(this.$el),e('<input type="text" />').on("change",function(){t.set("search",this.value)}).appendTo(this.$toolbar),this.bindAttr("data",function(t){this.set({exclude:[],search:""}),this.$toolbar.find(r(".filter")).remove();for(var a=[],s=this,i=0;i<t.length;i++)!t[i].label||e.inArray(t[i].label,a)>-1||(a.push(t[i].label),e("<a />").addClass(r("filter")).text(t[i].label).attr("rel",t[i].label).on("click",function(){s.onFilterClick(this)}).appendTo(this.$toolbar))}),this.bindAttr(["exclude","search"],function(){var t=this.get("data"),a=this.get("exclude"),s=this.get("search"),i=!1,r=[];s&&s===s.toLowerCase()&&(i=!0);for(var n=0;n<t.length;n++){var l=i?t[n].message.toLowerCase():t[n].message;t[n].label&&-1!==e.inArray(t[n].label,a)||s&&!(l.indexOf(s)>-1)||r.push(t[n])}this.$list.set("data",r)})},onFilterClick:function(t){e(t).toggleClass(r("excluded"));var a=[];this.$toolbar.find(r(".filter")+r(".excluded")).each(function(){a.push(this.rel)}),this.set("exclude",a)}}),PhpDebugBar.Widgets.TimelineWidget=PhpDebugBar.Widget.extend({tagName:"ul",className:r("timeline"),render:function(){this.bindAttr("data",function(t){if(this.$el.empty(),t.measures)for(var a=0;a<t.measures.length;a++){var s=t.measures[a],i=e("<div />").addClass(r("measure")),n=e("<li />"),l=(100*s.relative_start/t.duration).toFixed(2),d=Math.min((100*s.duration/t.duration).toFixed(2),100-l);if(i.append(e("<span />").addClass(r("value")).css({left:l+"%",width:d+"%"})),i.append(e("<span />").addClass(r("label")).text(s.label+" ("+s.duration_str+")")),s.collector&&e("<span />").addClass(r("collector")).text(s.collector).appendTo(i),i.appendTo(n),this.$el.append(n),s.params&&!e.isEmptyObject(s.params)){var p=e('<table><tr><th colspan="2">Params</th></tr></table>').addClass(r("params")).appendTo(n);for(var h in s.params)"function"!=typeof s.params[h]&&p.append('<tr><td class="'+r("name")+'">'+h+'</td><td class="'+r("value")+'"><pre><code>'+s.params[h]+"</code></pre></td></tr>");n.css("cursor","pointer").click(function(){var t=e(this).find("table");t.is(":visible")?t.hide():t.show()})}}})}}),PhpDebugBar.Widgets.ExceptionsWidget=PhpDebugBar.Widget.extend({className:r("exceptions"),render:function(){this.$list=new n({itemRenderer:function(t,a){if(e("<span />").addClass(r("message")).text(a.message).appendTo(t),a.file&&e("<span />").addClass(r("filename")).text(a.file+"#"+a.line).appendTo(t),a.type&&e("<span />").addClass(r("type")).text(a.type).appendTo(t),a.surrounding_lines){var s=i(a.surrounding_lines.join(""),"php").addClass(r("file")).appendTo(t);t.click(function(){s.is(":visible")?s.hide():s.show()})}}}),this.$list.$el.appendTo(this.$el),this.bindAttr("data",function(e){this.$list.set("data",e),1==e.length&&this.$list.$el.children().first().find(r(".file")).show()})}})}(PhpDebugBar.$);